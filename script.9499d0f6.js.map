{"version":3,"sources":["data.json","script.js"],"names":["module","exports","document","addEventListener","event","contactsListEl","querySelector","textContent","i","data","length","insertAdjacentHTML","id","name","onListClick","currentListItem","containerEl","target","classList","contains","add","showDetails","dataset","friendsMap","popularity","first","second","third","forEach","item","friends","el","Object","keys","localeCompare","onClickBack","remove","randomInteger","min","max","rand","Math","random","floor","arrNotFriends","randomFriend","includes","push","detailsListEl"],"mappings":"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","file":"script.9499d0f6.js","sourceRoot":"..","sourcesContent":["module.exports = [\n    {\n        \"id\": 1,\n        \"name\": \"Петя\",\n        \"friends\": [10,2,6]\n    },\n    {\n        \"id\": 2,\n        \"name\": \"Вася\",\n        \"friends\": [5,1,3]\n    },\n    {\n        \"id\": 3,\n        \"name\": \"Оля\",\n        \"friends\": [9,4,3]\n    },\n    {\n        \"id\": 4,\n        \"name\": \"Максим\",\n        \"friends\": [11,12,2]\n    },\n    {\n        \"id\": 5,\n        \"name\": \"Елена\",\n        \"friends\": [7,8,4]\n    },\n    {\n        \"id\": 6,\n        \"name\": \"Иван\",\n        \"friends\": [6,1,12]\n    },\n    {\n        \"id\": 7,\n        \"name\": \"Никита\",\n        \"friends\": [1,8,5]\n    },\n    {\n        \"id\": 8,\n        \"name\": \"Марат\",\n        \"friends\": [11,12,10]\n    },\n    {\n        \"id\": 9,\n        \"name\": \"Анатолий\",\n        \"friends\": [1,2,3]\n    },\n    {\n        \"id\": 10,\n        \"name\": \"Наташа\",\n        \"friends\": [8,4,2]\n    },\n    {\n        \"id\": 11,\n        \"name\": \"Марина\",\n        \"friends\": [1,5,8]\n    },\n    {\n        \"id\": 12,\n        \"name\": \"Кирилл\",\n        \"friends\": [5,2,12]\n    }\n];","import data from './data.json';\n\ndocument.addEventListener(\"DOMContentLoaded\", function(event) {\n  const contactsListEl = document.querySelector('.contacts-list');\n  contactsListEl.textContent = '';\n  for (let i = 0; i < data.length; i++) {\n    contactsListEl.insertAdjacentHTML('beforeend', `<li class=\"list-item\" data-id=\"${data[i].id}\">${data[i].name}</li>`);\n  }\n\n  contactsListEl.addEventListener('click', onListClick);\n\n  let currentListItem = null;\n  let containerEl = document.querySelector('#container');\n\n  function onListClick(event) {\n    if (event.target.classList.contains('list-item')) {\n      currentListItem = event.target;\n      currentListItem.classList.add('active');\n      containerEl.classList.add('details');\n      showDetails(event.target.dataset.id);\n    }\n  };\n\n  let friendsMap = {};\n  let popularity = {};\n  let first = {id: null, popularity: 0};\n  let second = {id: null, popularity: 0};\n  let third = {id: null, popularity: 0};\n  data.forEach(item => {\n    friendsMap[item.id] = {name: item.name, friends: item.friends}\n    item.friends.forEach(el => {\n      popularity[el] = popularity[el] ? popularity[el] + 1 : 1;\n    })\n  });\n\n  Object.keys(popularity).forEach(el => {\n    if ((popularity[el] > first.popularity)\n      || (popularity[el] === first.popularity\n        && (friendsMap[el].name.localeCompare(friendsMap[first.id].name) < 0))) {\n      third = second;\n      second = first;\n      first = { id: el, popularity: popularity[el]};\n    } else if ((popularity[el] > second.popularity)\n      || (popularity[el] === second.popularity\n        && (friendsMap[el].name.localeCompare(friendsMap[second.id].name) < 0 ))) {\n      third = second;\n      second = { id: el, popularity: popularity[el]};\n    } else if ((popularity[el] > third.popularity)\n      || (popularity[el] === third.popularity\n        && (friendsMap[el].name.localeCompare(friendsMap[third.id].name) < 0 ))) {\n      third = { id: el, popularity: popularity[el]};\n    }\n  })\n\n  document.querySelector('.details-view__back').addEventListener('click', onClickBack);\n\n  function onClickBack() {\n    currentListItem.classList.remove('active');\n    containerEl.classList.remove('details');\n  }\n\n  function randomInteger(min, max) {\n    let rand = min + Math.random() * (max + 1 - min);\n    return Math.floor(rand);\n  }\n\n  function showDetails(id) {\n    let arrNotFriends = [];\n\n    while( arrNotFriends.length < 3) {\n      const randomFriend = randomInteger(1, data.length);\n      if (!friendsMap[id].friends.includes(randomFriend)\n        && !arrNotFriends.includes(randomFriend)\n        && randomFriend != id) { \n        arrNotFriends.push(randomFriend);\n      }\n    }\n\n    const detailsListEl = document.querySelector('.details-view__list');\n    detailsListEl.textContent = '';\n    detailsListEl.insertAdjacentHTML('beforeend', '<li class=\"people-title\">Друзья</li>');\n    friendsMap[id].friends.forEach(item => {\n      detailsListEl.insertAdjacentHTML('beforeend', `<li><i class=\"fa fa-male\"></i><span>${friendsMap[item].name}</span></li>`);\n    });\n    detailsListEl.insertAdjacentHTML('beforeend', '<li class=\"people-title\">Не в друзьях</li>');\n    arrNotFriends.forEach(item => {\n      detailsListEl.insertAdjacentHTML('beforeend', `<li><i class=\"fa fa-male\"></i><span>${friendsMap[item].name}</span></li>`);\n    });\n    detailsListEl.insertAdjacentHTML('beforeend', '<li class=\"people-title\">Популярные люди</li>');\n    [first, second, third].forEach(item => {\n      detailsListEl.insertAdjacentHTML('beforeend', `<li><i class=\"fa fa-male\"></i><span>${friendsMap[item.id].name}</span></li>`);\n    });\n  }\n\n});\n"]}