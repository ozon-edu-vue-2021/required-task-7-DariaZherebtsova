{"version":3,"sources":["data.json","script.js"],"names":["module","exports","document","addEventListener","event","ulEl","querySelector","i","data","length","insertAdjacentHTML","id","name","onListClick","currentListItem","target","classList","contains","add","showDetails","dataset","friendsMap","popularity","first","second","third","forEach","item","friends","el","Object","keys","localeCompare","onClickBack","remove","randomInteger","min","max","rand","Math","random","floor","arrNotFriends","randomFriend","includes","push","textContent"],"mappings":"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","file":"script.e5eafaf2.js","sourceRoot":"..","sourcesContent":["module.exports = [\n    {\n        \"id\": 1,\n        \"name\": \"Петя\",\n        \"friends\": [10,2,6]\n    },\n    {\n        \"id\": 2,\n        \"name\": \"Вася\",\n        \"friends\": [5,1,3]\n    },\n    {\n        \"id\": 3,\n        \"name\": \"Оля\",\n        \"friends\": [9,4,3]\n    },\n    {\n        \"id\": 4,\n        \"name\": \"Максим\",\n        \"friends\": [11,12,2]\n    },\n    {\n        \"id\": 5,\n        \"name\": \"Елена\",\n        \"friends\": [7,8,4]\n    },\n    {\n        \"id\": 6,\n        \"name\": \"Иван\",\n        \"friends\": [6,1,12]\n    },\n    {\n        \"id\": 7,\n        \"name\": \"Никита\",\n        \"friends\": [1,8,5]\n    },\n    {\n        \"id\": 8,\n        \"name\": \"Марат\",\n        \"friends\": [11,12,10]\n    },\n    {\n        \"id\": 9,\n        \"name\": \"Анатолий\",\n        \"friends\": [1,2,3]\n    },\n    {\n        \"id\": 10,\n        \"name\": \"Наташа\",\n        \"friends\": [8,4,2]\n    },\n    {\n        \"id\": 11,\n        \"name\": \"Марина\",\n        \"friends\": [1,5,8]\n    },\n    {\n        \"id\": 12,\n        \"name\": \"Кирилл\",\n        \"friends\": [5,2,12]\n    }\n];","import data from './data.json';\n\ndocument.addEventListener(\"DOMContentLoaded\", function(event) {\n  const ulEl = document.querySelector('.contacts-list');\n  for (let i = 0; i < data.length; i++) {\n    ulEl.insertAdjacentHTML('beforeend', `<li class=\"list-item\" data-id=\"${data[i].id}\">${data[i].name}</li>`);\n  }\n\n  ulEl.addEventListener('click', onListClick);\n\n  let currentListItem = null;\n\n  function onListClick(event) {\n    if (event.target.classList.contains('list-item')) {\n      currentListItem = event.target;\n      currentListItem.classList.add('active');\n      document.querySelector('#container').classList.add('details');\n      showDetails(event.target.dataset.id);\n    }\n  };\n\n  let friendsMap = {};\n  let popularity = {};\n  let first = {id: null, popularity: 0};\n  let second = {id: null, popularity: 0};\n  let third = {id: null, popularity: 0};\n  data.forEach(item => {\n    friendsMap[item.id] = {name: item.name, friends: item.friends}\n    item.friends.forEach(el => {\n      popularity[el] = popularity[el] ? popularity[el] + 1 : 1;\n    })\n  });\n\n  Object.keys(popularity).forEach(el => {\n    if ((popularity[el] > first.popularity)\n      || (popularity[el] === first.popularity\n        && (friendsMap[el].name.localeCompare(friendsMap[first.id].name) < 0))) {\n      third = second;\n      second = first;\n      first = { id: el, popularity: popularity[el]};\n    } else if ((popularity[el] > second.popularity)\n      || (popularity[el] === second.popularity\n        && (friendsMap[el].name.localeCompare(friendsMap[second.id].name) < 0 ))) {\n      third = second;\n      second = { id: el, popularity: popularity[el]};\n    } else if ((popularity[el] > third.popularity)\n      || (popularity[el] === third.popularity\n        && (friendsMap[el].name.localeCompare(friendsMap[third.id].name) < 0 ))) {\n      third = { id: el, popularity: popularity[el]};\n    }\n  })\n\n  document.querySelector('.details-view__back').addEventListener('click', onClickBack);\n\n  function onClickBack() {\n    currentListItem.classList.remove('active');\n    document.querySelector('#container').classList.remove('details');\n  }\n\n  function randomInteger(min, max) {\n    let rand = min + Math.random() * (max + 1 - min);\n    return Math.floor(rand);\n  }\n\n  function showDetails(id) {\n    let arrNotFriends = [];\n\n    while( arrNotFriends.length < 3) {\n      const randomFriend = randomInteger(1, data.length);\n      if (!friendsMap[id].friends.includes(randomFriend)\n        && !arrNotFriends.includes(randomFriend)\n        && randomFriend != id) { \n        arrNotFriends.push(randomFriend);\n      }\n    }\n\n    const ulEl = document.querySelector('.details-view__list');\n    ulEl.textContent = '';\n    ulEl.insertAdjacentHTML('beforeend', '<li class=\"people-title\">Друзья</li>');\n    friendsMap[id].friends.forEach(item => {\n      ulEl.insertAdjacentHTML('beforeend', `<li><i class=\"fa fa-male\"></i><span>${friendsMap[item].name}</span></li>`);\n    });\n    ulEl.insertAdjacentHTML('beforeend', '<li class=\"people-title\">Не в друзьях</li>');\n    arrNotFriends.forEach(item => {\n      ulEl.insertAdjacentHTML('beforeend', `<li><i class=\"fa fa-male\"></i><span>${friendsMap[item].name}</span></li>`);\n    });\n    ulEl.insertAdjacentHTML('beforeend', '<li class=\"people-title\">Популярные люди</li>');\n    [first, second, third].forEach(item => {\n      ulEl.insertAdjacentHTML('beforeend', `<li><i class=\"fa fa-male\"></i><span>${friendsMap[item.id].name}</span></li>`);\n    });\n  }\n\n});\n\n\n\n\n\n\n// function prepareData(data) {\n//   let friendsMap = {};\n//   let popular = {};\n//   data.forEach(item => {\n//     friendsMap[item.id] = {name: item.name, friends: item.friends}\n//     item.friends.forEach(el => {\n//       popular[el] = popular[el] ? popular[el] + 1 : 1;\n//     })\n//   });\n\n//   return\n// }"]}